<mat-stepper  #stepper>
  <mat-step [stepControl]="generalForm" [editable]="true">
    <form [formGroup]="generalForm">
      <ng-template matStepLabel>{{
        'ui.logos.addEditLogo.general' | translate
      }}</ng-template>
      <mat-form-field appearance="fill">
        <mat-label>{{ 'ui.logos.addEditLogo.name' | translate }}</mat-label>
        <input matInput required formControlName="name" required />
        <mat-error *ngIf="generalForm.get('name')!.hasError('required')">{{
          'ui.logos.addEditLogo.nameIsRequired' | translate
        }}</mat-error>
      </mat-form-field>
      <div>
        <button [disabled]="generalForm.invalid" mat-button matStepperNext>
          {{ 'ui.logos.addEditLogo.next' | translate }}
        </button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="logoForm" [editable]="true">
    <form [formGroup]="logoForm">
      <ng-template matStepLabel>{{
        'ui.logos.addEditLogo.logoImage' | translate
      }}</ng-template>
      

      <div *ngIf="logoForm.get('logoFile')!.value" class="logo-wrapper">
        <img [src]="logoForm.get('logoFile')!.value" />
        <button (click)="clearLogoFile()" class="logo-delete" color="warn" mat-icon-button>
          <mat-icon>delete</mat-icon>
        </button>
      </div>

      <input (change)="logoFileUploaded(logoInput)" #logoInput type="file" fxHide accept=".png" />

      <button *ngIf="!logoFileUploading" mat-raised-button color="accent" (click)="selectLogoFile(logoInput)">
        {{ 'ui.logos.addEditLogo.selectLogoFile' | translate }}
      </button>

      <mat-progress-bar color="accent" *ngIf="logoFileUploading" mode="determinate" [value]="logoFileUploadProgress"></mat-progress-bar>
      
      <div>
        <button mat-button matStepperPrevious>
          {{ 'ui.logos.addEditLogo.back' | translate }}
        </button>
        <button [disabled]="logoForm.invalid" mat-button matStepperNext>
          {{ 'ui.logos.addEditLogo.next' | translate }}
        </button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="qrForm" [editable]="true">
    <form [formGroup]="qrForm">
      <ng-template matStepLabel>{{
        'ui.logos.addEditLogo.qrCode' | translate
      }}</ng-template>
      <ngx-qrcode-styling #qrcode [config]="qrConfig"></ngx-qrcode-styling>
      <div>
        <button mat-button matStepperPrevious>
          {{ 'ui.logos.addEditLogo.back' | translate }}
        </button>
        <button [disabled]="qrForm.invalid" mat-button matStepperNext>
          {{ 'ui.logos.addEditLogo.next' | translate }}
        </button>
      </div>
    </form>
  </mat-step>
    <mat-step [stepControl]="mergeForm" [editable]="true">
    <form [formGroup]="mergeForm">
      <ng-template matStepLabel>{{
        'ui.logos.addEditLogo.mergeImages' | translate
      }}</ng-template>
      TODO
      <div>
        <button mat-button matStepperPrevious>
          {{ 'ui.logos.addEditLogo.back' | translate }}
        </button>
        <button [disabled]="mergeForm.invalid" mat-button matStepperNext>
          {{ 'ui.logos.addEditLogo.next' | translate }}
        </button>
      </div>
    </form>
  </mat-step>
      <mat-step [stepControl]="computeForm" [editable]="true">
    <form [formGroup]="computeForm">
      <ng-template matStepLabel>{{
        'ui.logos.addEditLogo.optimize' | translate
      }}</ng-template>
      TODO
      <div>
        <button mat-button matStepperPrevious>
          {{ 'ui.logos.addEditLogo.back' | translate }}
        </button>
        <button [disabled]="computeForm.invalid" mat-button matStepperNext>
          {{ 'ui.logos.addEditLogo.next' | translate }}
        </button>
      </div>
    </form>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>{{
      'ui.logos.addEditLogo.done' | translate
    }}</ng-template>
    <p>You are now done.</p>
    <div>
      <button mat-button matStepperPrevious>
        {{ 'ui.logos.addEditLogo.back' | translate }}
      </button>
      <button mat-button (click)="stepper.reset()">
        {{ 'ui.logos.addEditLogo.reset' | translate }}
      </button>
    </div>
  </mat-step>
</mat-stepper>
